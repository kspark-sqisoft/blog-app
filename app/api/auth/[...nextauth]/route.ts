// ============================================
// NextAuth API ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬
// ============================================
// ì´ íŒŒì¼ì€ NextAuthì˜ ëª¨ë“  ì¸ì¦ ê´€ë ¨ API ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
// 
// ğŸ“ íŒŒì¼ ìœ„ì¹˜: app/api/auth/[...nextauth]/route.ts
// 
// ============================================
// Next.js Catch-All ë¼ìš°íŠ¸ì˜ ë™ì‘ ì›ë¦¬
// ============================================
// [...nextauth]ëŠ” Next.jsì˜ catch-all ë¼ìš°íŠ¸ì…ë‹ˆë‹¤.
// ì´ëŠ” ëª¨ë“  /api/auth/* ê²½ë¡œì˜ ìš”ì²­ì„ ì´ íŒŒì¼ë¡œ ë¼ìš°íŒ…í•©ë‹ˆë‹¤.
//
// ì˜ˆì‹œ:
// - /api/auth/signin â†’ ì´ íŒŒì¼ì˜ handlersê°€ ì²˜ë¦¬
// - /api/auth/callback/credentials â†’ ì´ íŒŒì¼ì˜ handlersê°€ ì²˜ë¦¬
// - /api/auth/session â†’ ì´ íŒŒì¼ì˜ handlersê°€ ì²˜ë¦¬
// - /api/auth/csrf â†’ ì´ íŒŒì¼ì˜ handlersê°€ ì²˜ë¦¬
// - /api/auth/providers â†’ ì´ íŒŒì¼ì˜ handlersê°€ ì²˜ë¦¬
// - /api/auth/signout â†’ ì´ íŒŒì¼ì˜ handlersê°€ ì²˜ë¦¬
//
// Next.js 13+ App Routerì—ì„œëŠ” route.ts íŒŒì¼ì—ì„œ
// GETê³¼ POST í•¨ìˆ˜ë¥¼ exportí•˜ì—¬ API ë¼ìš°íŠ¸ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
//
// ============================================
// í˜¸ì¶œ ê²½ë¡œ ë° í”Œë¡œìš°
// ============================================
//
// 1ï¸âƒ£ ë¡œê·¸ì¸ ìš”ì²­ (POST)
//    í´ë¼ì´ì–¸íŠ¸: app/auth/signin/page.tsx
//    â†’ signIn("credentials", {...}) í˜¸ì¶œ
//    â†’ NextAuth.js ë‚´ë¶€ì ìœ¼ë¡œ POST /api/auth/callback/credentials ìš”ì²­ ìƒì„±
//    â†’ ì´ íŒŒì¼ì˜ POST í•¸ë“¤ëŸ¬ê°€ ìš”ì²­ ìˆ˜ì‹ 
//    â†’ lib/auth.tsì˜ authorize í•¨ìˆ˜ ì‹¤í–‰
//    â†’ ì¸ì¦ ì„±ê³µ ì‹œ JWT ìƒì„± ë° ì„¸ì…˜ ì¿ í‚¤ ì„¤ì •
//    â†’ ì‘ë‹µ ë°˜í™˜
//
// 2ï¸âƒ£ ì„¸ì…˜ ì¡°íšŒ (GET)
//    í´ë¼ì´ì–¸íŠ¸: useSession() í˜¸ì¶œ (next-auth/react)
//    â†’ GET /api/auth/session ìš”ì²­ ìƒì„±
//    â†’ ì´ íŒŒì¼ì˜ GET í•¸ë“¤ëŸ¬ê°€ ìš”ì²­ ìˆ˜ì‹ 
//    â†’ lib/auth.tsì˜ session callback ì‹¤í–‰
//    â†’ JWT í† í°ì—ì„œ ì„¸ì…˜ ì •ë³´ ì¶”ì¶œ
//    â†’ ì„¸ì…˜ ê°ì²´ ë°˜í™˜
//
// 3ï¸âƒ£ ë¡œê·¸ì•„ì›ƒ ìš”ì²­ (POST)
//    í´ë¼ì´ì–¸íŠ¸: signOut() í˜¸ì¶œ
//    â†’ POST /api/auth/signout ìš”ì²­ ìƒì„±
//    â†’ ì´ íŒŒì¼ì˜ POST í•¸ë“¤ëŸ¬ê°€ ìš”ì²­ ìˆ˜ì‹ 
//    â†’ ì„¸ì…˜ ì¿ í‚¤ ì‚­ì œ
//    â†’ ì‘ë‹µ ë°˜í™˜
//
// 4ï¸âƒ£ CSRF í† í° ì¡°íšŒ (GET)
//    í´ë¼ì´ì–¸íŠ¸: NextAuth.js ë‚´ë¶€ì ìœ¼ë¡œ ìë™ í˜¸ì¶œ
//    â†’ GET /api/auth/csrf ìš”ì²­ ìƒì„±
//    â†’ ì´ íŒŒì¼ì˜ GET í•¸ë“¤ëŸ¬ê°€ ìš”ì²­ ìˆ˜ì‹ 
//    â†’ CSRF í† í° ë°˜í™˜
//
// 5ï¸âƒ£ Provider ì •ë³´ ì¡°íšŒ (GET)
//    í´ë¼ì´ì–¸íŠ¸: NextAuth.js ë‚´ë¶€ì ìœ¼ë¡œ ìë™ í˜¸ì¶œ
//    â†’ GET /api/auth/providers ìš”ì²­ ìƒì„±
//    â†’ ì´ íŒŒì¼ì˜ GET í•¸ë“¤ëŸ¬ê°€ ìš”ì²­ ìˆ˜ì‹ 
//    â†’ ë“±ë¡ëœ Provider ëª©ë¡ ë°˜í™˜
//
// ============================================
// handlersì˜ ì—­í• 
// ============================================
// lib/auth.tsì—ì„œ exportëœ handlersëŠ” NextAuth.jsê°€ ìƒì„±í•œ
// GET/POST í•¸ë“¤ëŸ¬ í•¨ìˆ˜ë“¤ì„ í¬í•¨í•©ë‹ˆë‹¤.
//
// handlers.GET: ëª¨ë“  GET ìš”ì²­ ì²˜ë¦¬
//   - /api/auth/session: ì„¸ì…˜ ì¡°íšŒ
//   - /api/auth/csrf: CSRF í† í° ì¡°íšŒ
//   - /api/auth/providers: Provider ëª©ë¡ ì¡°íšŒ
//
// handlers.POST: ëª¨ë“  POST ìš”ì²­ ì²˜ë¦¬
//   - /api/auth/callback/credentials: Credentials ë¡œê·¸ì¸ ì²˜ë¦¬
//   - /api/auth/signout: ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬
//
// ============================================
// ì‹¤ì œ ìš”ì²­ ì˜ˆì‹œ
// ============================================
//
// ë¡œê·¸ì¸ ì‹œ:
// POST /api/auth/callback/credentials
// Body: { email: "user@example.com", password: "password123" }
// â†’ handlers.POSTê°€ ìš”ì²­ ìˆ˜ì‹ 
// â†’ auth.tsì˜ authorize í•¨ìˆ˜ ì‹¤í–‰
// â†’ ì¸ì¦ ì„±ê³µ ì‹œ Set-Cookie í—¤ë”ë¡œ ì„¸ì…˜ ì¿ í‚¤ ì„¤ì •
// â†’ Response: { ok: true } ë˜ëŠ” { error: "..." }
//
// ì„¸ì…˜ ì¡°íšŒ ì‹œ:
// GET /api/auth/session
// Cookie: next-auth.session-token=...
// â†’ handlers.GETì´ ìš”ì²­ ìˆ˜ì‹ 
// â†’ ì¿ í‚¤ì—ì„œ JWT í† í° ì¶”ì¶œ
// â†’ auth.tsì˜ session callback ì‹¤í–‰
// â†’ Response: { user: { id: "...", email: "...", name: "..." } }
//
// ============================================
// ì™œ ì´ ìœ„ì¹˜ì— ìˆì–´ì•¼ í•˜ëŠ”ê°€?
// ============================================
// Next.js App Routerì˜ íŒŒì¼ ê¸°ë°˜ ë¼ìš°íŒ… ê·œì¹™:
// - app/api/auth/[...nextauth]/route.ts
//   â†’ /api/auth/* ê²½ë¡œë¡œ ë§¤í•‘ë¨
//
// [...nextauth]ëŠ” ë™ì  ì„¸ê·¸ë¨¼íŠ¸ë¡œ, ëª¨ë“  í•˜ìœ„ ê²½ë¡œë¥¼ ìº¡ì²˜í•©ë‹ˆë‹¤.
// ì˜ˆ: /api/auth/anything â†’ ì´ íŒŒì¼ë¡œ ë¼ìš°íŒ…ë¨
//
// NextAuth.jsëŠ” ê¸°ë³¸ì ìœ¼ë¡œ /api/auth/* ê²½ë¡œë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ,
// ì´ ìœ„ì¹˜ì— ìˆì–´ì•¼ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.

import { handlers } from "@/lib/auth";

// ============================================
// NextAuth í•¸ë“¤ëŸ¬ë¥¼ Next.js API ë¼ìš°íŠ¸ë¡œ export
// ============================================
// Next.js App Routerì˜ route.ts íŒŒì¼ì€ GETê³¼ POST í•¨ìˆ˜ë¥¼ exportí•˜ì—¬
// HTTP ë©”ì„œë“œë³„ë¡œ ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
//
// handlers.GET: ëª¨ë“  GET ìš”ì²­ ì²˜ë¦¬
// handlers.POST: ëª¨ë“  POST ìš”ì²­ ì²˜ë¦¬
//
// ì´ë ‡ê²Œ exportí•˜ë©´ Next.jsê°€ ìë™ìœ¼ë¡œ ì´ í•¨ìˆ˜ë“¤ì„
// /api/auth/* ê²½ë¡œì˜ ìš”ì²­ í•¸ë“¤ëŸ¬ë¡œ ë“±ë¡í•©ë‹ˆë‹¤.
export const { GET, POST } = handlers;
