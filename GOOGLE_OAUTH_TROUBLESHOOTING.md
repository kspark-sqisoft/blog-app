# Google OAuth μ¤λ¥ ν•΄κ²° κ°€μ΄λ“

## π”΄ μ¤λ¥: "The OAuth client was not found" / "401 μ¤λ¥: invalid_client"

μ΄ μ¤λ¥λ” Google OAuth ν΄λΌμ΄μ–ΈνΈλ¥Ό μ°Ύμ„ μ μ—†μ„ λ• λ°μƒν•©λ‹λ‹¤.

## β… ν•΄κ²° λ°©λ²•

### 1λ‹¨κ³„: ν™κ²½ λ³€μ ν™•μΈ

ν”„λ΅μ νΈ λ£¨νΈμ— `.env.local` νμΌμ΄ μλ”μ§€ ν™•μΈν•κ³ , λ‹¤μ ν™κ²½ λ³€μκ°€ μ¬λ°”λ¥΄κ² μ„¤μ •λμ–΄ μλ”μ§€ ν™•μΈν•μ„Έμ”:

```env
AUTH_GOOGLE_ID=your-google-client-id-here
AUTH_GOOGLE_SECRET=your-google-client-secret-here
```

**ν™•μΈ μ‚¬ν•­:**
- β… νμΌλ…μ΄ μ •ν™•ν `.env.local`μΈμ§€ ν™•μΈ (`.env` μ•„λ‹)
- β… ν”„λ΅μ νΈ λ£¨νΈ λ””λ ‰ν† λ¦¬μ— μλ”μ§€ ν™•μΈ
- β… κ°’μ— λ”°μ΄ν‘(`"` λλ” `'`)κ°€ μ—†λ”μ§€ ν™•μΈ
- β… κ°’ μ•λ’¤μ— κ³µλ°±μ΄ μ—†λ”μ§€ ν™•μΈ
- β… `your-google-client-id-here` λ¶€λ¶„μ„ μ‹¤μ  κ°’μΌλ΅ κµμ²΄ν–λ”μ§€ ν™•μΈ

**μ¬λ°”λ¥Έ μμ‹:**
```env
AUTH_GOOGLE_ID=123456789-abcdefghijklmnop.apps.googleusercontent.com
AUTH_GOOGLE_SECRET=GOCSPX-abcdefghijklmnopqrstuvwxyz
```

**μλ»λ μμ‹:**
```env
# λ”°μ΄ν‘ μ‚¬μ© (X)
AUTH_GOOGLE_ID="123456789-abcdefghijklmnop.apps.googleusercontent.com"

# κ³µλ°± ν¬ν•¨ (X)
AUTH_GOOGLE_ID = 123456789-abcdefghijklmnop.apps.googleusercontent.com

# κ°’μ΄ μ—†μ (X)
AUTH_GOOGLE_ID=
```

### 2λ‹¨κ³„: Google Cloud Consoleμ—μ„ ν΄λΌμ΄μ–ΈνΈ ID/Secret ν™•μΈ

1. **Google Cloud Console μ ‘μ†**
   - https://console.cloud.google.com/ μ ‘μ†
   - μ¬λ°”λ¥Έ ν”„λ΅μ νΈ μ„ νƒ

2. **μ‚¬μ©μ μΈμ¦ μ •λ³΄ ν™•μΈ**
   - μ™Όμ½ λ©”λ‰΄: "API λ° μ„λΉ„μ¤" > "μ‚¬μ©μ μΈμ¦ μ •λ³΄"
   - OAuth 2.0 ν΄λΌμ΄μ–ΈνΈ ID λ©λ΅ ν™•μΈ
   - ν΄λΌμ΄μ–ΈνΈ ID ν΄λ¦­ν•μ—¬ μƒμ„Έ μ •λ³΄ ν™•μΈ

3. **ν΄λΌμ΄μ–ΈνΈ ID/Secret μ¬ν™•μΈ**
   - ν΄λΌμ΄μ–ΈνΈ ID: `123456789-xxxxx.apps.googleusercontent.com` ν•μ‹
   - ν΄λΌμ΄μ–ΈνΈ λ³΄μ• λΉ„λ°€λ²νΈ: `GOCSPX-xxxxx` ν•μ‹
   - λ§μ•½ Secretμ„ μƒμ–΄λ²„λ Έλ‹¤λ©΄:
     - ν΄λΌμ΄μ–ΈνΈ ID μ†μ μ—°ν•„ μ•„μ΄μ½ ν΄λ¦­
     - "ν‚¤ λ‹¤μ‹ λ§λ“¤κΈ°" ν΄λ¦­
     - μƒ Secret λ³µμ‚¬

### 3λ‹¨κ³„: μΉμΈλ λ¦¬λ””λ ‰μ… URI ν™•μΈ

Google Cloud Consoleμ—μ„ μΉμΈλ λ¦¬λ””λ ‰μ… URIκ°€ μ¬λ°”λ¥΄κ² μ„¤μ •λμ–΄ μλ”μ§€ ν™•μΈ:

**κ°λ° ν™κ²½:**
```
http://localhost:3000/api/auth/callback/google
```

**ν™•μΈ μ‚¬ν•­:**
- β… μ •ν™•ν• URLμΈμ§€ ν™•μΈ (μ¤νƒ€ μ—†μ)
- β… `http` vs `https` ν™•μΈ (κ°λ°μ€ `http`)
- β… ν¬νΈ λ²νΈ ν™•μΈ (`3000`)
- β… κ²½λ΅κ°€ μ •ν™•ν•μ§€ ν™•μΈ (`/api/auth/callback/google`)

### 4λ‹¨κ³„: κ°λ° μ„λ²„ μ¬μ‹μ‘

ν™κ²½ λ³€μλ¥Ό λ³€κ²½ν• ν›„μ—λ” **λ°λ“μ‹** κ°λ° μ„λ²„λ¥Ό μ¬μ‹μ‘ν•΄μ•Ό ν•©λ‹λ‹¤:

```bash
# 1. ν„μ¬ μ‹¤ν–‰ μ¤‘μΈ μ„λ²„ μ¤‘μ§€ (Ctrl+C)
# 2. μ„λ²„ μ¬μ‹μ‘
bun run dev
```

**μ¤‘μ”:** ν™κ²½ λ³€μλ” μ„λ²„ μ‹μ‘ μ‹μ—λ§ λ΅λ“λλ―€λ΅, λ³€κ²½ ν›„ μ¬μ‹μ‘μ΄ ν•„μμ…λ‹λ‹¤.

### 5λ‹¨κ³„: ν™κ²½ λ³€μ λ΅λ“ ν™•μΈ (λ””λ²„κΉ…)

ν™κ²½ λ³€μκ°€ μ λ€λ΅ λ΅λ“λλ”μ§€ ν™•μΈν•λ ¤λ©΄, μ„μ‹λ΅ λ‹¤μ μ½”λ“λ¥Ό μ¶”κ°€ν•  μ μμµλ‹λ‹¤:

`lib/auth.ts` νμΌμ—μ„ (μ„μ‹ λ””λ²„κΉ…μ©):

```typescript
// β οΈ λ””λ²„κΉ…μ© - ν”„λ΅λ•μ…μ—μ„λ” μ κ±°ν•μ„Έμ”
console.log("Google OAuth Config:", {
    hasId: !!process.env.AUTH_GOOGLE_ID,
    hasSecret: !!process.env.AUTH_GOOGLE_SECRET,
    idLength: process.env.AUTH_GOOGLE_ID?.length,
    secretLength: process.env.AUTH_GOOGLE_SECRET?.length,
});
```

μ„λ²„λ¥Ό μ¬μ‹μ‘ν•κ³  μ½μ†” λ΅κ·Έλ¥Ό ν™•μΈν•μ„Έμ”.

### 6λ‹¨κ³„: λΈλΌμ°μ € μΊμ‹ λ° μΏ ν‚¤ μ‚­μ 

λΈλΌμ°μ €μ μΊμ‹μ™€ μΏ ν‚¤λ¥Ό μ‚­μ ν•κ³  λ‹¤μ‹ μ‹λ„:

1. κ°λ°μ λ„κµ¬ μ—΄κΈ° (F12)
2. Application νƒ­ > Storage > Clear site data
3. λλ” μ‹ν¬λ¦Ώ λ¨λ“μ—μ„ ν…μ¤νΈ

## π” μ¶”κ°€ ν™•μΈ μ‚¬ν•­

### OAuth λ™μ ν™”λ©΄ μ„¤μ • ν™•μΈ

1. Google Cloud Console > "API λ° μ„λΉ„μ¤" > "OAuth λ™μ ν™”λ©΄"
2. μ•±μ΄ "ν…μ¤νΈ μ¤‘" μƒνƒμΈ κ²½μ°:
   - "ν…μ¤νΈ μ‚¬μ©μ" λ©λ΅μ— λ³ΈμΈ μ΄λ©”μΌμ΄ μ¶”κ°€λμ–΄ μλ”μ§€ ν™•μΈ
   - ν…μ¤νΈ μ‚¬μ©μκ°€ μ•„λ‹λ©΄ λ΅κ·ΈμΈ λ¶κ°€

### ν”„λ΅μ νΈ μ„ νƒ ν™•μΈ

Google Cloud Consoleμ—μ„ μ¬λ°”λ¥Έ ν”„λ΅μ νΈλ¥Ό μ„ νƒν–λ”μ§€ ν™•μΈ:
- μƒλ‹¨μ ν”„λ΅μ νΈ μ„ νƒ λ“λ΅­λ‹¤μ΄ ν™•μΈ
- OAuth ν΄λΌμ΄μ–ΈνΈ IDκ°€ μƒμ„±λ ν”„λ΅μ νΈμ™€ μΌμΉν•λ”μ§€ ν™•μΈ

## π“ μ²΄ν¬λ¦¬μ¤νΈ

λ‹¤μ ν•­λ©μ„ λ¨λ‘ ν™•μΈν•μ„Έμ”:

- [ ] `.env.local` νμΌμ΄ ν”„λ΅μ νΈ λ£¨νΈμ— μμ
- [ ] `AUTH_GOOGLE_ID` ν™κ²½ λ³€μκ°€ μ„¤μ •λ¨
- [ ] `AUTH_GOOGLE_SECRET` ν™κ²½ λ³€μκ°€ μ„¤μ •λ¨
- [ ] ν™κ²½ λ³€μ κ°’μ— λ”°μ΄ν‘λ‚ κ³µλ°±μ΄ μ—†μ
- [ ] Google Cloud Consoleμ—μ„ ν΄λΌμ΄μ–ΈνΈ ID/Secretμ΄ μ¬λ°”λ¦„
- [ ] μΉμΈλ λ¦¬λ””λ ‰μ… URIκ°€ `http://localhost:3000/api/auth/callback/google`λ΅ μ„¤μ •λ¨
- [ ] κ°λ° μ„λ²„λ¥Ό μ¬μ‹μ‘ν•¨
- [ ] OAuth λ™μ ν™”λ©΄μ—μ„ ν…μ¤νΈ μ‚¬μ©μλ΅ λ³ΈμΈ μ΄λ©”μΌμ΄ μ¶”κ°€λ¨

## π† μ—¬μ „ν λ¬Έμ κ°€ μλ‹¤λ©΄

1. **ν™κ²½ λ³€μ νμΌ μ„μΉ ν™•μΈ**
   - `.env.local` νμΌμ΄ `package.json`κ³Ό κ°™μ€ λ””λ ‰ν† λ¦¬μ— μλ”μ§€ ν™•μΈ

2. **λ‹¤λ¥Έ ν™κ²½ λ³€μ νμΌ ν™•μΈ**
   - `.env`, `.env.development` λ“± λ‹¤λ¥Έ νμΌμ΄ μλ”μ§€ ν™•μΈ
   - Next.jsλ” `.env.local`μ„ μ°μ„ μ μΌλ΅ λ΅λ“ν•©λ‹λ‹¤

3. **Google Cloud Consoleμ—μ„ μƒ ν΄λΌμ΄μ–ΈνΈ ID μƒμ„±**
   - κΈ°μ΅΄ ν΄λΌμ΄μ–ΈνΈ IDλ¥Ό μ‚­μ ν•κ³  μƒλ΅ μƒμ„±
   - μƒ ID/Secretμ„ `.env.local`μ— μ—…λ°μ΄νΈ
   - μ„λ²„ μ¬μ‹μ‘

4. **NextAuth.js λ΅κ·Έ ν™•μΈ**
   - κ°λ° μ„λ²„ μ½μ†”μ—μ„ μ¤λ¥ λ©”μ‹μ§€ ν™•μΈ
   - λΈλΌμ°μ € κ°λ°μ λ„κµ¬μ Network νƒ­μ—μ„ μ”μ²­ ν™•μΈ
